# Exchange API

Все запросы используют спецификацию [JSON-RPC 2.0](http://www.jsonrpc.org/specification).

## Методы

* [Customer API](Customer.md)
* [Performer API](Performer.md)

## Базовая информация

### Авторизация

Для авторизации требуются заголовки HTTP:

* **X-Key** - UserKey пользователя;
* **X-Sign** - sha256 по алгоритму ниже.

#### Алгоритм

`X-Sign` считается как sha256 от `Content` + `UserKey`.

### Запрос

Пример запроса:

```json
{
    "jsonrpc":"2.0",
    "method":"update",
    "params": {
        "value":2
    },
    "id":1
}
```

* **method** - имя вызываемого метода;
* **params** - структура, содержащая параметры, которые будут переданы методу;
* **id** - идентификатор для сопоставления запроса и ответа.

### Ответ

#### Успешный

Пример ответа при успешном выполнении метода:

```json
{
    "jsonrpc":"2.0",
    "result":"ok",
    "id":1
}
```

#### Ошибка

В случае возникновения ошибки, вместо поля `result` в ответе будет поле `error`:

```json
{
    "jsonrpc":"2.0",
    "error": {
        "code":-32000,
        "message":"Server error",
        "data":"Order not found"
    },
    "id":1
}
```

Поле `error` содержит следующие поля:

* **code** - код ошибки;
* **message** - общее сообщение;
* **data** - подробные данные.

##### Общие ошибки

Всего шесть видов основных ошибок:

| Код    | Сообщение        | Описание                         |
| :----: | ---------------- | -------------------------------- |
| -32700 | Parse error      | Не удалось разобрать JSON        |
| -32600 | Invalid Request  | Запрос не соответствует JSON-RPC |
| -32601 | Method not found | Метод не найден                  |
| -32602 | Invalid params   | Переданы некорректные параметры  |
| -32603 | Internal error   | Внутренняя ошибка JSON-RPC       |
| -32000 | Server error     | Все остальные ошибки             |
